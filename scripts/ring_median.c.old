#include <stdio.h>
#include <stdlib.h>

#define RING_NUM 12

int i_len, j_len;

int ring_i[RING_NUM] = {0, 4, 7, 8, 7, 4, 0, -4, -7, -8, -7, -4};
int ring_j[RING_NUM] = {8, 7, 4, 0, -4, -7, -8, -7, -4, 0, 4, 7};
// int ring_i[RING_NUM] = {2, 0, -2, 0};
// int ring_j[RING_NUM] = {0, 2, 0, -2};
float ring_values[RING_NUM];

float *data;

int compare_float(const void *a, const void *b)
{
	float c = *(float *)&a;
	float d = *(float *)&b;
	return (c > d) ? 1 : -1;
}

void sort_ring_values(int count)
{
	for (int i = 1; i < count; i++)
	{
		int j = i;
		while (j > 0 && ring_values[j - 1] > ring_values[j])
		{
			int temp = ring_values[j - 1];
			ring_values[j - 1] = ring_values[j];
			ring_values[j] = temp;
			j--;
		}
	}
}

float ring_median(int i_center, int j_center)
{
	int count = 0;

	for (int r = 0; r < RING_NUM; r++)
	{
		int i = i_center + ring_i[r];
		int j = j_center + ring_j[r];
		if (i < 0 || i >= i_len || j < 0 || j >= j_len) continue;
		ring_values[count++] = data[i * i_len + j];
	}

	sort_ring_values(count);

	/*
	for (int z = 0; z < count; z++)
		fprintf(stderr, "%.2f ", ring_values[z]);
	fprintf(stderr, "\n");
	*/

	if (count % 2 == 0)
		return (ring_values[count/2 - 1] + ring_values[count/2]) / 2;
	else
		return ring_values[count/2];
}

int main(void)
{
	// output results
	scanf("%d %d", &i_len, &j_len);

	// allocate memory
	data = (float*) malloc(i_len * j_len * sizeof(float));

	// read in data
	for (int i = 0; i < i_len; i++)
	{
		for (int j = 0; j < j_len; j++)
		{
			scanf("%f", &data[i * i_len + j]);
		}
	}

	for (int i = 0; i < i_len; i++)
	{
		for (int j = 0; j < j_len; j++)
		{
			printf("%f ", data[i * i_len + j] - ring_median(i, j));
		}
		printf("\n");
	}

	return 0;
}
